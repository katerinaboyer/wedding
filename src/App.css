@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Source+Sans+3:wght@300;400;600&display=swap');

:root {
  --forest: #13482f; /* deep forest green */
  --leaf: #2eaab3; /* baby blue / teal */
  --butter: #fff3a8; /* light butter yellow */
  --accent-dark: #0b2b1f; /* very dark accent */
  --muted-bg: #f6fbf8;
  --panel-bg: #eaf9f6;
}

/* 8-bit magic forest navbar */
nav {
  padding: 1rem;
  background-color: var(--forest);
  /* subtle pixel tiled effect */
  background-image: repeating-linear-gradient(0deg, rgba(255,255,255,0.02) 0 4px, transparent 4px 8px),
                    repeating-linear-gradient(90deg, rgba(0,0,0,0.03) 0 4px, transparent 4px 8px);
  image-rendering: pixelated;
  /* remove bottom 'black bar' by avoiding vertical offset in shadow */
  box-shadow: 6px 0 0 0 var(--accent-dark), -4px 0 0 0 rgba(0,0,0,0.05);
  border-bottom: 6px solid var(--butter);
}

nav ul {
  list-style: none;
  display: flex;
  gap: 1rem;
  margin: 0;
  padding: 0;
  justify-content: center;
  align-items: center;
}

nav li {
  list-style: none;
}

nav a {
  display: inline-block;
  padding: 10px 14px;
  text-decoration: none;
  color: var(--accent-dark);
  background: linear-gradient(180deg, var(--leaf) 0%, #7dd6da 100%);
  border: 4px solid var(--butter);
  box-shadow: 4px 4px 0 0 var(--accent-dark);
  font-family: 'Press Start 2P', system-ui, monospace;
  font-size: 12px;
  letter-spacing: 1px;
  text-transform: uppercase;
  line-height: 1;
  transform: translateZ(0);
  -webkit-font-smoothing: none;
  image-rendering: pixelated;
}

/* strong 8-bit hover (no smooth transitions) */
nav a:hover,
nav a:focus {
  background: var(--butter);
  color: var(--accent-dark);
  box-shadow: 6px 6px 0 0 var(--accent-dark), inset -3px -3px 0 0 rgba(0,0,0,0.06);
  border-color: var(--forest);
}

/* make the active link look like a pressed 8-bit button */
nav a[aria-current="page"],
nav a.active {
  background: var(--accent-dark);
  color: var(--butter);
  box-shadow: 2px 2px 0 0 rgba(0,0,0,0.7) inset, 6px 6px 0 0 var(--accent-dark);
}

#map { height: 180px; }

/* Responsive tweaks for mobile */
@media (max-width: 700px) {
  nav {
    padding: 0.6rem 0.5rem;
  }

  nav ul {
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
  }

  nav a {
    padding: 8px 10px;
    font-size: 10px;
    border-width: 3px;
  }
}

@media (max-width: 420px) {
  nav ul {
    gap: 0.4rem;
  }

  nav a {
    padding: 8px 8px;
    font-size: 9px;
  }
}

/* Home page: pixel panels and headings */
main.pixel-home {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  -webkit-font-smoothing: none;
  image-rendering: pixelated;
  font-family: 'Press Start 2P', system-ui, monospace;
  -webkit-touch-callout: none;
  user-select: none;
}

/* Prevent text selection and highlight on canvas/buttons (mobile) */
canvas {
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  touch-action: manipulation;
}

/* Add breathing room (left/right padding) on all pages except the game screen */
main:not(.pixel-home) {
  padding-left: 24px;
  padding-right: 24px;
  box-sizing: border-box;
}

@media (min-width: 768px) {
  main:not(.pixel-home) {
    padding-left: 48px;
    padding-right: 48px;
  }
}

/* Global 8-bit magical forest base */
body {
  background: linear-gradient(180deg, #eaf9f6, #dff6f5);
  color: var(--accent-dark);
  font-family: 'Source Sans 3', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  -webkit-font-smoothing: antialiased;
  image-rendering: auto;
}

/* Make headings bold and pixel-styled site-wide */
h1, h2, h3, h4 {
  font-family: 'Press Start 2P', system-ui, monospace;
  color: var(--forest);
}

/* Page containers get a pixel panel treatment */
.page-panel {
  background: var(--panel-bg);
  border: 6px solid var(--butter);
  box-shadow: 6px 0 0 0 var(--accent-dark);
  padding: 18px;
  image-rendering: pixelated;
}


main.pixel-home header h1.pixel-title {
  /* use baby-blue text with a dark pixel shadow for strong contrast */
  color: var(--leaf);
  text-shadow: 3px 3px 0 var(--accent-dark);
  font-size: 28px;
  margin: 0;
  display: block;
  text-align: center;
  width: 100%;
}

@media (max-width: 480px) {
  main.pixel-home header h1.pixel-title {
    font-size: 20px;
  }
}

/* typewriter caret for header prompt */
.typewriter {
  display: block;
  max-width: min(720px, 92%);
  margin: 0 auto;
  white-space: normal; /* allow wrapping */
  overflow-wrap: anywhere;
  word-break: break-word;
  text-align: center;
  font-size: 13px;
  line-height: 1.25;
}
.tw-caret {
  display: inline-block;
  margin-left: 6px;
  color: var(--accent-dark);
  animation: tw-blink 1s steps(1) infinite;
}

@media (max-width: 420px) {
  .typewriter { font-size: 12px; }
}
@keyframes tw-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.pixel-panel {
  border: 6px solid var(--butter);
  /* remove vertical offset so no dark bar appears under the panel; keep a right-side pixel edge */
  box-shadow: 6px 0 0 0 var(--accent-dark);
  background: linear-gradient(180deg, #eaf9f6, #dff6f5);
  image-rendering: pixelated;
}

/* Controls: 8-bit pixel buttons used on mobile */
.pixel-control {
  font-family: 'Press Start 2P', system-ui, monospace;
  background: linear-gradient(180deg, var(--butter), #ffeaa3);
  color: var(--accent-dark);
  border: 4px solid var(--accent-dark);
  box-shadow: 6px 6px 0 0 var(--accent-dark);
  image-rendering: pixelated;
  -webkit-font-smoothing: none;
}

.pixel-control:active,
.pixel-control:focus {
  transform: translate(2px, 2px);
  box-shadow: 2px 2px 0 0 var(--accent-dark);
  outline: none;
}

@media (max-width: 420px) {
  .pixel-control {
    border-width: 3px;
    box-shadow: 4px 4px 0 0 var(--accent-dark);
  }
}

/* make the big mobile control buttons match the 8-bit palette */
.pixel-home button {
  font-family: 'Press Start 2P', system-ui, monospace;
}

/* Event page windows */
.page-event {
  color: #0f172a;
}
.dress-window {
  background: #fffef8;
  border: 1px solid #efe6cf;
  box-shadow: 4px 4px 0 0 rgba(15,23,42,0.6);
  padding: 20px;
}
.info-window {
  background: #fffef8;
  border: 1px solid #efe6cf;
  box-shadow: 4px 4px 0 0 rgba(15,23,42,0.6);
  padding: 20px;
}

/* Readable font stack for event content (not 8-bit) */
.readable-font {
  font-family: 'Source Sans 3', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  line-height: 1.4;
  color: #0f172a;
  font-size: 15px;
}

/* Photo gallery (masonry-style with 2 columns) */
.photo-grid {
  column-count: 2;
  column-gap: 24px;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  -webkit-column-fill: balance;
  column-fill: balance;
}
.photo-item {
  display: inline-block; /* required for column flow */
  width: 100%;
  background: #ffffff;
  padding: 10px; /* inner white border */
  border: 8px solid #ffffff; /* polaroid-like white frame */
  box-shadow: 8px 8px 0 0 rgba(15,23,42,0.6); /* chunky pixel shadow */
  margin: 0 0 20px;
  break-inside: avoid;
  -webkit-column-break-inside: avoid;
  box-sizing: border-box;
}
.photo-item img {
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
  image-rendering: pixelated;
}
.photo-item .caption {
  margin-top: 8px;
  font-size: 12px;
  text-align: center;
  color: #334155;
}

@media (max-width: 640px) {
  .photo-grid {
    column-count: 1;
    column-gap: 16px;
  }
  .photo-item {
    padding: 8px;
    border-width: 6px;
    box-shadow: 6px 6px 0 0 rgba(15,23,42,0.5);
    margin-bottom: 16px;
  }
}

@media (max-width: 640px) {
  .dress-window, .info-window {
    padding: 14px;
  }
}

/* Game wrapper and canvas sizing */
.game-wrapper { display: flex; justify-content: center; }
.game-canvas { display: block; width: 100%; max-width: 420px; height: auto; }
@media (min-width: 800px) {
  .game-canvas { max-width: 360px; }
}
@media (max-width: 420px) {
  /* full-bleed on small phones */
  .game-canvas { max-width: 100%; }
}

/* ensure the game wrapper is the positioning context for controls */
.game-wrapper { position: relative; }
/* Controls should appear below the canvas, not overlay it. Pull them up slightly so they don't conflict with the window border. */
.game-controls { position: static; display: flex; justify-content: center; align-items: center; pointer-events: none; margin-top: -6px; padding-bottom: 8px; }
.game-controls > .flex { pointer-events: auto; }
@media (min-width: 800px) {
  /* slightly nudge controls upward on desktop to avoid window border */
  .game-controls { margin-top: -12px; padding-bottom: 12px; }
}
